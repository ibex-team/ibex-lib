
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Sets &#8212; IBEX 2.8 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Strategies" href="strategy.html" />
    <link rel="prev" title="Separators" href="separator.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="strategy.html" title="Strategies"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="separator.html" title="Separators"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">IBEX 2.8 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="sets">
<span id="set"></span><h1>Sets<a class="headerlink" href="#sets" title="Permalink to this headline">¶</a></h1>
<p><strong>Note:</strong> This part of the library is recent and under active development. It will be enriched with new functionalities
in future releases.</p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Ibex provides a structure for representing sets of <span class="math notranslate nohighlight">\(\mathbb{R}^n\)</span> with boxes and performing operations on sets diretly.
Another possible name for such a set would be a <em>paving</em>.</p>
<p>The structure is organized as a binary tree. Each leaf represents a box with a <em>status</em> that indicates whether
the box is inside the set, outside the set or potentially crossing the boundary of the set.
The status is a boolean interval (<code class="docutils literal notranslate"><span class="pre">BoolInterval</span></code>) which possible values are either <code class="docutils literal notranslate"><span class="pre">YES</span></code> (<em>inside</em>), <code class="docutils literal notranslate"><span class="pre">NO</span></code> (<em>outside</em>)
or <code class="docutils literal notranslate"><span class="pre">MAYBE</span></code> (<em>boundary</em>). This is depicted in the figure below:</p>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="images/set.png"><img alt="images/set.png" src="images/set.png" style="width: 450px;" /></a>
<p class="caption"><span class="caption-text"><strong>Example of “set”</strong>, obtained from the constraint <span class="math notranslate nohighlight">\(\|(x,y)\|\le5\)</span>.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="a-graphical-tool-vibes">
<span id="lab-vibes"></span><h2>A graphical tool: Vibes<a class="headerlink" href="#a-graphical-tool-vibes" title="Permalink to this headline">¶</a></h2>
<p>In all the examples proposed below, we will display boxes (rectangles) to have a visual rendering of the computations.</p>
<p>In the solutions, we propose to use <a class="reference external" href="http://enstabretagnerobotics.github.io/VIBES/">Vibes</a> but you can easily adapt the code to use your favorite graphical tool.</p>
<p>If you want to use Vibes alos, here is a few tips (valid for Linux and MacOS).</p>
<p>First, install Vibes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gunzip</span>  <span class="n">VIBES</span><span class="o">-</span><span class="n">XXX</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">tar</span> <span class="n">xvf</span> <span class="n">VIBES</span><span class="o">-</span><span class="n">XXX</span><span class="o">.</span><span class="n">tar</span>
<span class="n">cd</span> <span class="n">VIBES</span><span class="o">-</span><span class="n">XXX</span><span class="o">/</span><span class="n">viewer</span>
<span class="n">cmake</span> <span class="o">.</span>
<span class="n">make</span>
<span class="n">cd</span> <span class="o">../..</span>
</pre></div>
</div>
<p>Vibes is based on a client-server approach, the boxes are sent by the client program through a pipe
and plot by another program (the viewer).</p>
<p>To run the viewer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VIBES</span><span class="o">-</span><span class="n">XXX</span><span class="o">/</span><span class="n">viewer</span><span class="o">/</span><span class="n">VIBes</span><span class="o">-</span><span class="n">viewer</span><span class="o">&amp;</span>
</pre></div>
</div>
<p>Now, copy the client API in the folder of your C++ program:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="n">VIBES</span><span class="o">-</span><span class="n">XXX</span><span class="o">/</span><span class="n">client</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">C</span><span class="o">++/</span><span class="n">src</span><span class="o">/*</span> <span class="p">[</span><span class="n">my</span><span class="o">-</span><span class="n">folder</span><span class="p">]</span>
</pre></div>
</div>
<p>In the client program, include the Vibes API:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;ibex.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;vibes.cpp&quot;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">ibex</span><span class="p">;</span>
</pre></div>
</div>
<p>Then, connect to the server with the following instructions.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">vibes</span><span class="o">::</span><span class="n">beginDrawing</span> <span class="p">();</span>
  <span class="n">vibes</span><span class="o">::</span><span class="n">newFigure</span><span class="p">(</span><span class="s">&quot;....&quot;</span><span class="p">);</span>
  <span class="p">...</span>
</pre></div>
</div>
<p>And disconnect before your program terminantes:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">vibes</span><span class="o">::</span><span class="n">endDrawing</span><span class="p">();</span>
</pre></div>
</div>
<p>Finally, to plot a box ([a,b],[c,d]) just call:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">vibes</span><span class="o">::</span><span class="n">drawBox</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="s">&quot;...&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>What is between the double quotes is the color code of the box. For instance, “b[r]” will paint the box in red and the contour in blue.</p>
</div>
<div class="section" id="set-creation">
<span id="id1"></span><h2>Set Creation<a class="headerlink" href="#set-creation" title="Permalink to this headline">¶</a></h2>
<p>A set is an instance of <code class="docutils literal notranslate"><span class="pre">Set</span></code> and can either be initially defined as <span class="math notranslate nohighlight">\(\mathbb{R}^n\)</span> itself or a specific box:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>  <span class="c1">// create the two-dimensional set (-oo,+oo)x(-oo,+oo)</span>
  <span class="n">Set</span> <span class="nf">set1</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

  <span class="c1">// create the two-dimensional set [0,1]x[0,1]</span>
  <span class="n">Set</span> <span class="nf">set2</span><span class="p">(</span><span class="n">IntervalVector</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">Interval</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)));</span>
</pre></div>
</div>
<p>It can also be initialized from a constraint or a system of constraints.
In this case, the set is built by performing some computations recursively, until some precision is reached. The second parameter given to the
constructor controls this precision.</p>
<p><strong>Note</strong>: the computation performed recursively is an application of the <a class="reference internal" href="separator.html#sep-ctr"><span class="std std-ref">forward-backward separator</span></a> associated to the
constraint.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>  <span class="c1">// Create the constraint ||(x,y)||²&lt;=25</span>
  <span class="n">NumConstraint</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span><span class="s">&quot;y&quot;</span><span class="p">,</span><span class="s">&quot;x^2+y^2&lt;=25&quot;</span><span class="p">);</span>

  <span class="c1">// Create the set with a precision of 0.01</span>
  <span class="n">Set</span> <span class="nf">set</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="mf">0.01</span><span class="p">);</span>
</pre></div>
</div>
<p>The result is the following picture, obtained with Vibes. We explain how we have generated this picture in the next section.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/set-sep.png"><img alt="_images/set-sep.png" src="_images/set-sep.png" style="width: 300px;" /></a>
</div>
</div>
<div class="section" id="set-exploration">
<span id="set-explore"></span><h2>Set Exploration<a class="headerlink" href="#set-exploration" title="Permalink to this headline">¶</a></h2>
<p>The internal structure of sets is not intended to be handled directly by users (and may actually change with time).
If you want to explore a set, you can use the <code class="docutils literal notranslate"><span class="pre">SetVisitor</span></code> class (following the
<a class="reference external" href="http://en.wikipedia.org/wiki/Visitor_pattern">visitor design pattern</a>) . This class must implement a <code class="docutils literal notranslate"><span class="pre">visit_leaf</span></code>
function that will be automatically called for every leaf of the set. It can also optionnaly implement a <code class="docutils literal notranslate"><span class="pre">visit_node</span></code>
function that is called for every intermediate node in the tree, and tell wether or not to visit children of the current
node by returning true (default) or false.</p>
<p>A typical usage of a set visitor is for listing or plotting the set and we shall illustrate the mechanism for such usage.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">visit_leaf</span></code> function  must take in argument the information that characterizes a leaf, namely, a box (<code class="docutils literal notranslate"><span class="pre">IntervalVector</span></code>) and a status
(<code class="docutils literal notranslate"><span class="pre">BoolInterval</span></code>). Here is an example that simply display the box and the status of a leaf in the standard output:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ToConsole</span> <span class="o">:</span> <span class="k">public</span> <span class="n">SetVisitor</span> <span class="p">{</span>
  <span class="cm">/**</span>
<span class="cm">   * The function that will be called automatically on every boxes (leaves) of the set.</span>
<span class="cm">   */</span>
  <span class="kt">void</span> <span class="n">visit_leaf</span><span class="p">(</span><span class="k">const</span> <span class="n">IntervalVector</span><span class="o">&amp;</span> <span class="n">box</span><span class="p">,</span> <span class="n">BoolInterval</span> <span class="n">status</span><span class="p">)</span> <span class="p">{</span>

    <span class="n">output</span> <span class="o">&lt;&lt;</span> <span class="n">box</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; : &quot;</span><span class="p">;</span>

    <span class="k">switch</span> <span class="p">(</span><span class="n">status</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="nl">YES</span><span class="p">:</span>    <span class="n">output</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;in&quot;</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="nl">NO</span><span class="p">:</span>     <span class="n">output</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;out&quot;</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="nl">MAYBE</span> <span class="p">:</span> <span class="n">output</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;?&quot;</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">output</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Now the following code <a class="reference internal" href="#set-file"><span class="std std-ref">loads a set</span></a> from a file an lists all the boxes inside:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>  <span class="n">Set</span> <span class="nf">set</span><span class="p">(</span><span class="s">&quot;set-example&quot;</span><span class="p">);</span>

  <span class="n">ToConsole</span> <span class="n">to_console</span><span class="p">;</span>
  <span class="n">set</span><span class="p">.</span><span class="n">visit</span><span class="p">(</span><span class="n">to_console</span><span class="p">);</span>
</pre></div>
</div>
<p>The result is:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 54%" />
<col style="width: 46%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>([-inf, -9] ; [-inf, inf]) : out
([-9, 9] ; [-inf, -9]) : out
([-9, -4.5] ; [-9, 0]) : ?
([-4.5, 0] ; [-9, -8]) : ?
([-4.5, 0] ; [-8, 0]) : in
([-9, -4.5] ; [0, 9]) : ?
([-4.5, 0] ; [0, 8]) : in
([-4.5, 0] ; [8, 9]) : ?
([0, 4.5] ; [-9, -8]) : ?
([0, 4.5] ; [-8, 0]) : in
([4.5, 9] ; [-9, 0]) : ?
([0, 4.5] ; [0, 8]) : in
([0, 4.5] ; [8, 9]) : ?
([4.5, 9] ; [0, 9]) : ?
([-9, 9] ; [9, inf]) : out
([9, inf] ; [-inf, inf]) : out
</pre></div>
</div>
</td>
<td><div class="figure align-center">
<a class="reference internal image-reference" href="_images/set-visit.png"><img alt="_images/set-visit.png" src="_images/set-visit.png" style="width: 300px;" /></a>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="2"><p><strong>Visiting the set with</strong> <code class="docutils literal notranslate"><span class="pre">ToConsole</span></code></p></td>
<td rowspan="2"><p><strong>Visiting the set with</strong> <code class="docutils literal notranslate"><span class="pre">ToVibes</span></code></p></td>
</tr>
<tr class="row-odd"></tr>
</tbody>
</table>
<p id="set-plot">We will now show how to plot a set calculated by Ibex with <a class="reference internal" href="#lab-vibes"><span class="std std-ref">Vibes</span></a>.</p>
<p>We create a new class that implements the <code class="docutils literal notranslate"><span class="pre">visit_leaf</span></code> function as follows:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ToVibes</span> <span class="o">:</span> <span class="k">public</span> <span class="n">SetVisitor</span> <span class="p">{</span>

<span class="k">public</span><span class="o">:</span>

  <span class="cm">/**</span>
<span class="cm">   * Plot a  box within the frame [-max,max]x[-max,max]</span>
<span class="cm">   *</span>
<span class="cm">   * The frame avoids, in particular, to plot unbounded OUT boxes.</span>
<span class="cm">   */</span>
  <span class="n">ToVibes</span><span class="p">(</span><span class="kt">double</span> <span class="n">max</span><span class="p">)</span> <span class="o">:</span> <span class="n">frame</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">max</span><span class="o">*</span><span class="n">Interval</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span> <span class="p">{</span>  <span class="p">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Function that will be called automatically on every boxes (leaves) of the set.</span>
<span class="cm">   */</span>
  <span class="kt">void</span> <span class="n">visit_leaf</span><span class="p">(</span><span class="k">const</span> <span class="n">IntervalVector</span><span class="o">&amp;</span> <span class="n">box</span><span class="p">,</span> <span class="n">BoolInterval</span> <span class="n">status</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Intersect the box with the frame</span>
    <span class="n">IntervalVector</span> <span class="n">framebox</span><span class="o">=</span><span class="n">box</span> <span class="o">&amp;</span> <span class="n">frame</span><span class="p">;</span>

    <span class="c1">//  Associate a color to the box.</span>
    <span class="c1">//  - YES (means &quot;inside&quot;) is in green</span>
    <span class="c1">//  - NO (means &quot;outside&quot;) is in red</span>
    <span class="c1">//  - MAYBE (means &quot;boundary&quot;) is in blue.</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">color</span><span class="p">;</span>

    <span class="k">switch</span> <span class="p">(</span><span class="n">status</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nl">YES</span><span class="p">:</span>  <span class="n">color</span><span class="o">=</span><span class="s">&quot;g&quot;</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">NO</span><span class="p">:</span>   <span class="n">color</span><span class="o">=</span><span class="s">&quot;r&quot;</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">MAYBE</span> <span class="p">:</span> <span class="n">color</span><span class="o">=</span><span class="s">&quot;b&quot;</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Plot the box with Vibes</span>
    <span class="n">vibes</span><span class="o">::</span><span class="n">drawBox</span><span class="p">(</span><span class="n">framebox</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">lb</span><span class="p">(),</span> <span class="n">framebox</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ub</span><span class="p">(),</span> <span class="n">framebox</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">lb</span><span class="p">(),</span> <span class="n">framebox</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ub</span><span class="p">(),</span> <span class="n">color</span><span class="p">);</span>
  <span class="p">}</span>

   <span class="n">IntervalVector</span> <span class="n">frame</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The main code is similar:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>  <span class="n">vibes</span><span class="o">::</span><span class="n">beginDrawing</span> <span class="p">();</span>
  <span class="n">vibes</span><span class="o">::</span><span class="n">newFigure</span><span class="p">(</span><span class="s">&quot;visit&quot;</span><span class="p">);</span>

  <span class="n">Set</span> <span class="nf">set</span><span class="p">(</span><span class="s">&quot;set-example&quot;</span><span class="p">);</span>

  <span class="n">ToVibes</span> <span class="nf">to_vibes</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
  <span class="n">set</span><span class="p">.</span><span class="n">visit</span><span class="p">(</span><span class="n">to_vibes</span><span class="p">);</span>
  <span class="n">vibes</span><span class="o">::</span><span class="n">endDrawing</span><span class="p">();</span>
</pre></div>
</div>
<p>And the result is the picture above.</p>
</div>
<div class="section" id="file-operations">
<span id="set-file"></span><h2>File operations<a class="headerlink" href="#file-operations" title="Permalink to this headline">¶</a></h2>
<p>You can save a set into a file and load a set from a file.</p>
<p>To save into a file named “set-example”:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>  <span class="n">set</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="s">&quot;set-example&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>To load a set from a file, use the constructor with string argument:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>  <span class="n">Set</span> <span class="nf">set</span><span class="p">(</span><span class="s">&quot;set-example&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="set-intersection">
<span id="set-inter"></span><h2>Set Intersection<a class="headerlink" href="#set-intersection" title="Permalink to this headline">¶</a></h2>
<p>A set can be intersected with another set that can either be explicit (of type <code class="docutils literal notranslate"><span class="pre">Set</span></code>) or implicit.
A contractor and a separator are examples of implicit sets. In this case, we talk about
<a class="reference internal" href="#set-contract"><span class="std std-ref">set contraction</span></a> rather than intersection (but, conceptually, this is two
equivalent terms when dealing with sets).</p>
<p>We consider here intersection of two explicits sets.</p>
<p>The intersection between two sets is obtained with the <code class="docutils literal notranslate"><span class="pre">&amp;=</span></code> operator.
In the next example, we create two sets from separators, one being a circle or radius 5,
the other being the complementary of a circle of radius 4. The result of the intersection gives a ring.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>  <span class="c1">// Create a first set ||(x,y)||&lt;=5</span>
  <span class="n">NumConstraint</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span><span class="s">&quot;y&quot;</span><span class="p">,</span><span class="s">&quot;x^2+y^2&lt;=25&quot;</span><span class="p">);</span>
  <span class="n">Set</span> <span class="nf">set</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="mf">0.01</span><span class="p">);</span>

  <span class="c1">// Create a second set ||(x,y)||&gt;=4</span>
  <span class="n">NumConstraint</span> <span class="nf">c2</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span><span class="s">&quot;y&quot;</span><span class="p">,</span><span class="s">&quot;x^2+y^2&gt;=16&quot;</span><span class="p">);</span>
  <span class="n">Set</span> <span class="nf">set2</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span><span class="mf">0.01</span><span class="p">);</span>

  <span class="c1">// Intersect the first set with the second one</span>
  <span class="n">set</span> <span class="o">&amp;=</span> <span class="n">set2</span><span class="p">;</span>
</pre></div>
</div>
<p>The result is the following picture.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/set-inter.png"><img alt="_images/set-inter.png" src="_images/set-inter.png" style="width: 300px;" /></a>
</div>
<p><strong>Note:</strong> It should be emphasized that it is always better to handle sets explicitly on last resort.
This means that, in this example, it would have been more efficient to create one set from the conjunction
of the two constraints.</p>
</div>
<div class="section" id="set-union">
<h2>Set Union<a class="headerlink" href="#set-union" title="Permalink to this headline">¶</a></h2>
<p>The union works similarly. In the next example, we create two sets, one being a circle centered on the origin
and the other the circle centered on the point (5,0).
Then we perform the union of the two sets.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>  <span class="c1">// Create a first set ||(x,y)||&lt;=5</span>
  <span class="n">NumConstraint</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span><span class="s">&quot;y&quot;</span><span class="p">,</span><span class="s">&quot;x^2+y^2&lt;=25&quot;</span><span class="p">);</span>
  <span class="n">Set</span> <span class="nf">set</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="mf">0.01</span><span class="p">);</span>

  <span class="c1">// Create a second set ||(x-5,y)||&lt;=5</span>
  <span class="n">NumConstraint</span> <span class="nf">c2</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span><span class="s">&quot;y&quot;</span><span class="p">,</span><span class="s">&quot;(x-5)</span><span class="o">^</span><span class="mi">2</span><span class="o">+</span><span class="n">y</span><span class="o">^</span><span class="mi">2</span><span class="o">&lt;=</span><span class="mi">25</span><span class="s">&quot;)</span><span class="p">;</span>
  <span class="n">Set</span> <span class="nf">set2</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span><span class="mf">0.01</span><span class="p">);</span>

  <span class="c1">// Make the union</span>
  <span class="n">set</span> <span class="o">|=</span> <span class="n">set2</span><span class="p">;</span>
</pre></div>
</div>
<p>The result is the following picture.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/set-union.png"><img alt="_images/set-union.png" src="_images/set-union.png" style="width: 300px;" /></a>
</div>
</div>
<div class="section" id="set-contraction">
<span id="set-contract"></span><h2>Set Contraction<a class="headerlink" href="#set-contraction" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="separator.html#sep"><span class="std std-ref">separator</span></a> can be used to contract a set.</p>
<p>The operator is recursively applied on
the set until some precision is reached (size of boundary boxes).</p>
<p>We illustrate this by calculating again the “ring” but in a different way.
We have already shown how to calculate a ring:</p>
<ul class="simple">
<li><p>by giving a conjunction of the constraints to the <a class="reference internal" href="#set-creation"><span class="std std-ref">constructor of Set</span></a></p></li>
<li><p>by computing two sets separately, one for each constraint, and then by performing <a class="reference internal" href="#set-inter"><span class="std std-ref">an intersection</span></a></p></li>
</ul>
<p>We now create a set for one of the constraint and then contracts this set with the other constraint.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>  <span class="kt">double</span> <span class="n">eps</span><span class="o">=</span><span class="mf">0.01</span><span class="p">;</span>

  <span class="c1">// create the set with one of the constraints</span>
  <span class="n">NumConstraint</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span><span class="s">&quot;y&quot;</span><span class="p">,</span><span class="s">&quot;x^2+y^2&lt;=25&quot;</span><span class="p">);</span>
  <span class="n">Set</span> <span class="nf">set</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">eps</span><span class="p">);</span>

  <span class="c1">// create the second constraint</span>
  <span class="n">NumConstraint</span> <span class="nf">c2</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span><span class="s">&quot;y&quot;</span><span class="p">,</span><span class="s">&quot;x^2+y^2&gt;=16&quot;</span><span class="p">);</span>
  <span class="c1">// create a separator for this constraint</span>
  <span class="n">SepFwdBwd</span> <span class="nf">sep</span><span class="p">(</span><span class="n">c2</span><span class="p">);</span>
  <span class="c1">// contract the set with the separator</span>
  <span class="n">sep</span><span class="p">.</span><span class="n">contract</span><span class="p">(</span><span class="n">set</span><span class="p">,</span><span class="n">eps</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="set-intervals">
<span id="set-interval"></span><h2>Set Intervals<a class="headerlink" href="#set-intervals" title="Permalink to this headline">¶</a></h2>
<p>A set interval [S] (or i-set) <a class="reference internal" href="reference.html#jaulin12"><span class="std std-ref">[Jaulin 2012]</span></a> is the given of two sets <span class="math notranslate nohighlight">\((S_1,S_2)\)</span>
that represent a lower and upper bound (with respect to the inclusion order)
of an unkown set S:</p>
<div class="math notranslate nohighlight">
\[S_1 \subseteq S \subseteq S_2.\]</div>
<p>A possible notation (that we use in the code below) for the set interval [S] is: <span class="math notranslate nohighlight">\([S_1,S_2]\)</span>.</p>
<p>A set interval can be explicitly represented by an instance of the <code class="docutils literal notranslate"><span class="pre">SetInterval</span></code> class.
It can also be implicitly represented by a separator. Let us explain how.
A separator S have been used so far to represent a “simple” set (not a set interval)
by two complementary contractions <span class="math notranslate nohighlight">\(C_1\)</span> and <span class="math notranslate nohighlight">\(C_1\)</span>, being respectively for the inner and outer part.
This means that the set associated to the separator can be seen as the following
degenerated set interval:</p>
<div class="math notranslate nohighlight">
\[set(S) = [set(C_1),~^c{set(C_2)}].\]</div>
<p>where set(C) designates the set associated to C (the insensitive points).</p>
<p>Now, it is possible to change the status of either the inner or outer contraction to
the special value <code class="docutils literal notranslate"><span class="pre">MAYBE</span></code>. This means that the contracted part is not inside or
outside the set but potentially inside either one. If we change this way the
status of <span class="math notranslate nohighlight">\(C_1\)</span>, the separator is now associated to the set interval:</p>
<div class="math notranslate nohighlight">
\[set(S) = [\emptyset,~^c{set(C_2)}].\]</div>
<p>If we change the status of <span class="math notranslate nohighlight">\(C_2\)</span>, we obtain:</p>
<div class="math notranslate nohighlight">
\[set(S) = [set(C_1),\mathbb{R}^n].\]</div>
<p>The next example illustrates the use of separators to contract a set interval with the
following information:</p>
<ul class="simple">
<li><p>the set is enclosed in the circle centered on the origin and of radius 2</p></li>
<li><p>the set encloses n little circles centered on different points and or radius 1</p></li>
</ul>
<p>A set interval can be visited exactly like a set and we have used the same <code class="docutils literal notranslate"><span class="pre">ToVibes</span></code>
class as above for producing the picture below.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>  <span class="kt">double</span> <span class="n">eps</span><span class="o">=</span><span class="mf">0.001</span><span class="p">;</span>

  <span class="c1">// Create the distance function between (x,y)</span>
  <span class="c1">// and the point (cos(alpha),sin(alpha))</span>
  <span class="n">Variable</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">alpha</span><span class="p">;</span>
  <span class="n">Function</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">alpha</span><span class="p">,</span><span class="n">sqr</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha</span><span class="p">))</span><span class="o">+</span><span class="n">sqr</span><span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="n">sin</span><span class="p">(</span><span class="n">alpha</span><span class="p">)));</span>

  <span class="c1">// Build the initial box</span>
  <span class="n">IntervalVector</span> <span class="nf">box</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
  <span class="n">box</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">Interval</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
  <span class="n">box</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">Interval</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>

  <span class="c1">// Create the initial i-set [emptyset,[box]]</span>
  <span class="n">SetInterval</span> <span class="nf">set</span><span class="p">(</span><span class="n">box</span><span class="p">);</span>

  <span class="n">NumConstraint</span> <span class="nf">ctr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">sqr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="n">sqr</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="o">&lt;=</span><span class="mi">4</span><span class="p">);</span>
  <span class="c1">// Create a separator for the i-set [emptyset,ctr]</span>
  <span class="c1">// Initially, the i-set is [ctr,ctr]</span>
  <span class="n">SepFwdBwd</span> <span class="nf">sep</span><span class="p">(</span><span class="n">ctr</span><span class="p">);</span>

  <span class="c1">// We set the status of the first contraction to</span>
  <span class="c1">// &quot;maybe&quot; so that the i-set associated to the separator becomes [emptyset,ctr]</span>
  <span class="c1">// We contract the set with the separator, i.e.,</span>
  <span class="c1">// we compute [emptyset,[box]] &amp; [emptyset,ctr]</span>
  <span class="n">sep</span><span class="p">.</span><span class="n">contract</span><span class="p">(</span><span class="n">set</span><span class="p">,</span><span class="n">eps</span><span class="p">,</span><span class="n">MAYBE</span><span class="p">,</span><span class="n">NO</span><span class="p">);</span>

  <span class="c1">// Number of points</span>
  <span class="kt">int</span> <span class="n">n</span><span class="o">=</span><span class="mi">8</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NumConstraint</span> <span class="n">ctr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">Interval</span><span class="o">::</span><span class="n">pi</span><span class="p">()</span><span class="o">/</span><span class="n">n</span><span class="p">)</span><span class="o">&lt;=</span><span class="mf">0.04</span><span class="p">);</span>
    <span class="n">SepFwdBwd</span> <span class="nf">sep</span><span class="p">(</span><span class="n">ctr</span><span class="p">);</span>
    <span class="c1">// We set the status of the second contraction to</span>
    <span class="c1">// &quot;maybe&quot; so that the i-set associated to the separator becomes [ctr,R^n]</span>
    <span class="n">sep</span><span class="p">.</span><span class="n">contract</span><span class="p">(</span><span class="n">set</span><span class="p">,</span><span class="n">eps</span><span class="p">,</span><span class="n">YES</span><span class="p">,</span><span class="n">MAYBE</span><span class="p">);</span>
  <span class="p">}</span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/set-interval.png"><img alt="_images/set-interval.png" src="_images/set-interval.png" style="width: 300px;" /></a>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Sets</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#a-graphical-tool-vibes">A graphical tool: Vibes</a></li>
<li><a class="reference internal" href="#set-creation">Set Creation</a></li>
<li><a class="reference internal" href="#set-exploration">Set Exploration</a></li>
<li><a class="reference internal" href="#file-operations">File operations</a></li>
<li><a class="reference internal" href="#set-intersection">Set Intersection</a></li>
<li><a class="reference internal" href="#set-union">Set Union</a></li>
<li><a class="reference internal" href="#set-contraction">Set Contraction</a></li>
<li><a class="reference internal" href="#set-intervals">Set Intervals</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="separator.html"
                        title="previous chapter">Separators</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="strategy.html"
                        title="next chapter">Strategies</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/set.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="strategy.html" title="Strategies"
             >next</a> |</li>
        <li class="right" >
          <a href="separator.html" title="Separators"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">IBEX 2.8 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2007-2020, IMT Atlantique.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>